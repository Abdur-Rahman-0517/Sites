<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Text Analyzer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #2d388a, #4a4b8c);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #ff7e5f, #feb47b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline-block;
        }
        
        header p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
            opacity: 0.9;
            color: #e0e0ff;
        }
        
        .app-container {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .input-section {
            flex: 1;
            min-width: 300px;
            background: linear-gradient(to bottom right, #ffffff, #f5f7ff);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 25px;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .results-section {
            flex: 2;
            min-width: 300px;
            background: linear-gradient(to bottom right, #ffffff, #f5f7ff);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 25px;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #1a2a6c;
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eaeaea;
        }
        
        textarea {
            width: 100%;
            height: 250px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1rem;
            resize: vertical;
            transition: all 0.3s;
            line-height: 1.6;
            background: #fafbff;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
        }
        
        textarea:focus {
            outline: none;
            border-color: #5c6bc0;
            box-shadow: 0 0 0 3px rgba(92, 107, 192, 0.2), inset 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        button {
            flex: 1;
            padding: 14px 20px;
            background: linear-gradient(to right, #1a2a6c, #3f51b5);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s;
            min-width: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        button:hover {
            background: linear-gradient(to right, #0d1a52, #303f9f);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        button.secondary {
            background: linear-gradient(to right, #b21f1f, #d32f2f);
        }
        
        button.secondary:hover {
            background: linear-gradient(to right, #8a1818, #b71c1c);
        }
        
        .stats {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .stat-card {
            flex: 1;
            min-width: 140px;
            background: linear-gradient(to bottom right, #f8f9fa, #eef2f7);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        
        .stat-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: #1a2a6c;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.95rem;
            color: #6c757d;
        }
        
        .analysis-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        @media (max-width: 1000px) {
            .analysis-container {
                grid-template-columns: 1fr;
            }
        }
        
        .analysis-card {
            background: linear-gradient(to bottom right, #f8f9fa, #eef2f7);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        .chart-container {
            height: 200px;
            margin-top: 15px;
        }
        
        .pos-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .pos-table th, .pos-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eaeaea;
        }
        
        .pos-table th {
            background: linear-gradient(to right, #3f51b5, #1a2a6c);
            color: white;
            font-weight: 600;
        }
        
        .pos-table tr:hover {
            background-color: #f5f7ff;
        }
        
        .tag {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .tag-noun { background-color: #e3f2fd; color: #0d47a1; }
        .tag-verb { background-color: #e8f5e9; color: #1b5e20; }
        .tag-adj { background-color: #fff8e1; color: #f57f17; }
        .tag-adv { background-color: #f3e5f5; color: #6a1b9a; }
        .tag-pron { background-color: #ffebee; color: #b71c1c; }
        .tag-prep { background-color: #e0f7fa; color: #006064; }
        .tag-conj { background-color: #e8eaf6; color: #1a237e; }
        .tag-det { background-color: #fbe9e7; color: #bf360c; }
        .tag-other { background-color: #eceff1; color: #37474f; }
        
        .errors-container {
            flex: 1;
            overflow-y: auto;
            max-height: 300px;
            padding: 5px;
        }
        
        .error-card {
            background: white;
            border-left: 4px solid #b21f1f;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s;
        }
        
        .error-card:hover {
            transform: translateX(5px);
        }
        
        .error-card.good {
            border-left-color: #28a745;
        }
        
        .error-card.warning {
            border-left-color: #ffc107;
        }
        
        .error-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .error-type {
            font-weight: 700;
            color: #b21f1f;
            font-size: 1.1rem;
        }
        
        .error-card.good .error-type {
            color: #28a745;
        }
        
        .error-card.warning .error-type {
            color: #ffc107;
        }
        
        .error-id {
            background: #e9ecef;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            color: #495057;
            font-weight: 600;
        }
        
        .error-text {
            margin-bottom: 10px;
            font-style: italic;
            line-height: 1.5;
        }
        
        .suggestions {
            padding-top: 10px;
            border-top: 1px dashed #eaeaea;
            margin-top: 10px;
        }
        
        .suggestions ul {
            padding-left: 20px;
            margin-top: 8px;
        }
        
        .suggestions li {
            margin-bottom: 5px;
            line-height: 1.4;
        }
        
        .highlight {
            background-color: rgba(255, 217, 0, 0.3);
            padding: 0 3px;
            border-radius: 3px;
            font-weight: 600;
        }
        
        .error-message {
            background: #ffeef0;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            color: #dc3545;
            display: none;
            border-left: 4px solid #dc3545;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 30px;
            color: #1a2a6c;
        }
        
        .spinner {
            border: 4px solid rgba(26, 42, 108, 0.2);
            border-radius: 50%;
            border-top: 4px solid #1a2a6c;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        footer {
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            padding: 20px;
            font-size: 0.9rem;
            margin-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        
        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            .stats {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
            
            header h1 {
                font-size: 2.2rem;
            }
        }
        
        .tab-container {
            margin-top: 20px;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 15px;
            overflow-x: auto;
        }
        
        .tab {
            padding: 12px 24px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            white-space: nowrap;
            font-weight: 500;
        }
        
        .tab:hover {
            background: #f0f4ff;
        }
        
        .tab.active {
            border-bottom: 3px solid #1a2a6c;
            color: #1a2a6c;
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .tab-content.active {
            display: block;
        }
        
        .insight-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.05);
            border-left: 4px solid #5c6bc0;
        }
        
        .insight-card h4 {
            color: #1a2a6c;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .progress-container {
            background: #e9ecef;
            border-radius: 10px;
            height: 10px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, #4caf50, #8bc34a);
            border-radius: 10px;
        }
        
        .complexity-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        .complexity-value {
            font-weight: 600;
            color: #1a2a6c;
            margin-top: 5px;
            text-align: center;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .feature-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            transition: all 0.3s;
            border-top: 3px solid #5c6bc0;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
        .feature-card h4 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: #1a2a6c;
        }
        
        .feature-card p {
            color: #555;
            line-height: 1.6;
        }
        
        .export-options {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .export-btn {
            background: linear-gradient(to right, #1a2a6c, #3f51b5);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .export-btn:hover {
            background: linear-gradient(to right, #0d1a52, #303f9f);
            transform: translateY(-2px);
        }
        
        .keyword-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .keyword {
            background: #e3f2fd;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .metric-card {
            background: #f0f4ff;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }
        
        .metric-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .metric-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1a2a6c;
            margin-bottom: 5px;
        }
        
        .metric-label {
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        .sentiment-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
            gap: 10px;
        }
        
        .sentiment-bar {
            height: 10px;
            flex-grow: 1;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .sentiment-fill {
            height: 100%;
            border-radius: 5px;
        }
        
        .sentiment-label {
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .score-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            border-radius: 50%;
            width: 100px;
            height: 100px;
            margin: 10px auto;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        
        .score-value {
            font-size: 2rem;
            font-weight: 700;
            color: #1a2a6c;
        }
        
        .score-label {
            font-size: 0.8rem;
            color: #6c757d;
            text-align: center;
        }
        
        .complexity-chart {
            height: 200px;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-spell-check"></i> Advanced Text Analyzer</h1>
            <p>Comprehensive text analysis with grammar checking, style suggestions, and advanced linguistic insights</p>
        </header>
        
        <div class="app-container">
            <div class="input-section">
                <h2 class="section-title"><i class="fas fa-edit"></i> Your Text</h2>
                <textarea id="text-input" placeholder="Enter or paste your text here...">Welcome to the Advanced Text Analyzer! This sophisticated tool helps you enhance your writing by analyzing grammar, spelling, and stylistic elements. By providing detailed feedback and actionable suggestions, it enables you to refine your communication skills. The system also offers in-depth linguistic insights, readability metrics, and vocabulary analysis to help you create more effective and engaging content. Start by entering your text and clicking the Analyze button to receive comprehensive feedback.</textarea>
                
                <div class="controls">
                    <button id="analyze-btn"><i class="fas fa-search"></i> Analyze Text</button>
                    <button id="clear-btn" class="secondary"><i class="fas fa-broom"></i> Clear Text</button>
                </div>
                
                <div class="error-message" id="error-message">
                    <strong><i class="fas fa-exclamation-circle"></i> Error:</strong> 
                    <span id="error-text"></span>
                </div>
            </div>
            
            <div class="results-section">
                <h2 class="section-title"><i class="fas fa-chart-bar"></i> Analysis Results</h2>
                
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Analyzing your text. This may take a moment...</p>
                </div>
                
                <div id="results-content">
                    <div class="stats">
                        <div class="stat-card">
                            <div class="stat-value" id="word-count">0</div>
                            <div class="stat-label">Words</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="char-count">0</div>
                            <div class="stat-label">Characters</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="error-count">0</div>
                            <div class="stat-label">Issues Found</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="score">100%</div>
                            <div class="stat-label">Accuracy Score</div>
                        </div>
                    </div>
                    
                    <div class="analysis-container">
                        <div class="analysis-card">
                            <h3><i class="fas fa-chart-pie"></i> Part of Speech Distribution</h3>
                            <div class="chart-container">
                                <canvas id="pos-chart"></canvas>
                            </div>
                        </div>
                        <div class="analysis-card">
                            <h3><i class="fas fa-lightbulb"></i> Writing Insights</h3>
                            <div id="text-insights">
                                <div class="insight-card">
                                    <h4><i class="fas fa-tachometer-alt"></i> Readability Level</h4>
                                    <p>Text analysis will determine the complexity of your writing</p>
                                    <div class="progress-container">
                                        <div class="progress-bar" style="width: 50%"></div>
                                    </div>
                                    <div class="complexity-label">
                                        <span>Simple</span>
                                        <span>Complex</span>
                                    </div>
                                    <div class="complexity-value">Medium</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h3 style="margin: 20px 0 10px;"><i class="fas fa-star"></i> Key Metrics</h3>
                    <div class="metric-grid">
                        <div class="metric-card">
                            <div class="metric-value" id="sentiment-score">7.2</div>
                            <div class="metric-label">Sentiment Score</div>
                            <div class="sentiment-indicator">
                                <span class="sentiment-label">Negative</span>
                                <div class="sentiment-bar">
                                    <div class="sentiment-fill" style="width: 72%; background: linear-gradient(to right, #ff5252, #4caf50);"></div>
                                </div>
                                <span class="sentiment-label">Positive</span>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="readability-score">8.5</div>
                            <div class="metric-label">Readability Score</div>
                            <div class="score-card">
                                <div class="score-value">B2</div>
                                <div class="score-label">CEFR Level</div>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="lexical-density">63%</div>
                            <div class="metric-label">Lexical Density</div>
                            <div class="progress-container" style="margin-top: 15px;">
                                <div class="progress-bar" style="width: 63%; background: linear-gradient(to right, #1a2a6c, #3f51b5);"></div>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="passive-ratio">12%</div>
                            <div class="metric-label">Passive Voice</div>
                            <div class="progress-container" style="margin-top: 15px;">
                                <div class="progress-bar" style="width: 12%; background: linear-gradient(to right, #b21f1f, #d32f2f);"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-container">
                        <div class="tabs">
                            <div class="tab active" data-tab="errors">Grammar & Style</div>
                            <div class="tab" data-tab="pos">Linguistics</div>
                            <div class="tab" data-tab="insights">Advanced Insights</div>
                        </div>
                        
                        <div class="tab-content active" id="errors-tab">
                            <div class="errors-container" id="errors-container">
                                <div class="error-card good">
                                    <div class="error-header">
                                        <div class="error-type">Text Analysis Complete</div>
                                        <div class="error-id">Ready</div>
                                    </div>
                                    <p>Enter text and click "Analyze Text" to see detailed feedback on your writing.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="tab-content" id="pos-tab">
                            <table class="pos-table">
                                <thead>
                                    <tr>
                                        <th>Word</th>
                                        <th>Part of Speech</th>
                                        <th>Tag</th>
                                        <th>Definition</th>
                                    </tr>
                                </thead>
                                <tbody id="pos-table-body">
                                    <tr><td colspan="4" style="text-align: center;">No data available. Analyze text to see POS tags.</td></tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="tab-content" id="insights-tab">
                            <div class="analysis-container">
                                <div class="analysis-card">
                                    <h4><i class="fas fa-brain"></i> Cognitive Complexity</h4>
                                    <p>Text complexity based on syntactic structures and vocabulary:</p>
                                    <div class="complexity-chart">
                                        <canvas id="complexity-chart"></canvas>
                                    </div>
                                </div>
                                <div class="analysis-card">
                                    <h4><i class="fas fa-project-diagram"></i> Text Structure</h4>
                                    <div class="metric-grid">
                                        <div class="metric-card">
                                            <div class="metric-value" id="sentence-var">3.8</div>
                                            <div class="metric-label">Sentence Variation</div>
                                        </div>
                                        <div class="metric-card">
                                            <div class="metric-value" id="para-length">4.2</div>
                                            <div class="metric-label">Avg. Paragraph Length</div>
                                        </div>
                                    </div>
                                    <p>Transition words usage: <strong>Good</strong> (8% of total words)</p>
                                    <p>Nominalization index: <strong>Moderate</strong> (22% of nouns)</p>
                                </div>
                            </div>
                            
                            <div class="analysis-card" style="margin-top: 20px;">
                                <h4><i class="fas fa-chart-line"></i> Readability Metrics</h4>
                                <div class="metric-grid">
                                    <div class="metric-card">
                                        <div class="metric-value">12.8</div>
                                        <div class="metric-label">Flesch-Kincaid</div>
                                    </div>
                                    <div class="metric-card">
                                        <div class="metric-value">62.5</div>
                                        <div class="metric-label">Flesch Reading Ease</div>
                                    </div>
                                    <div class="metric-card">
                                        <div class="metric-value">10.2</div>
                                        <div class="metric-label">Gunning Fog</div>
                                    </div>
                                    <div class="metric-card">
                                        <div class="metric-value">9.7</div>
                                        <div class="metric-label">Coleman-Liau</div>
                                    </div>
                                </div>
                                <p>Overall reading level: <strong>Grade 10-12</strong> (High School)</p>
                            </div>
                            
                            <div class="analysis-card" style="margin-top: 20px;">
                                <h4><i class="fas fa-book"></i> Vocabulary Analysis</h4>
                                <div class="metric-grid">
                                    <div class="metric-card">
                                        <div class="metric-value">78%</div>
                                        <div class="metric-label">Word Uniqueness</div>
                                    </div>
                                    <div class="metric-card">
                                        <div class="metric-value">42%</div>
                                        <div class="metric-label">Academic Vocabulary</div>
                                    </div>
                                </div>
                                <p>Most frequent words: analysis, writing, text, enhance, feedback</p>
                                <p>Vocabulary sophistication index: <strong>High</strong> (7.8/10)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Made with ❤️ by Abdur Rahman | Advanced Text Analysis Tool v3.0</p>
        </footer>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const textInput = document.getElementById('text-input');
            const analyzeBtn = document.getElementById('analyze-btn');
            const clearBtn = document.getElementById('clear-btn');
            const wordCountEl = document.getElementById('word-count');
            const charCountEl = document.getElementById('char-count');
            const errorCountEl = document.getElementById('error-count');
            const scoreEl = document.getElementById('score');
            const errorsContainer = document.getElementById('errors-container');
            const errorMessage = document.getElementById('error-message');
            const errorText = document.getElementById('error-text');
            const loading = document.getElementById('loading');
            const resultsContent = document.getElementById('results-content');
            const posTableBody = document.getElementById('pos-table-body');
            const textInsights = document.getElementById('text-insights');
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            // Chart initialization
            const posChartCtx = document.getElementById('pos-chart').getContext('2d');
            const complexityChartCtx = document.getElementById('complexity-chart').getContext('2d');
            let posChart, complexityChart;
            
            // API Configuration
            const API_KEY = 'KPMxL6dGEVPRQhFj';
            const API_URL = 'https://api.textgears.com/grammar';
            
            // Initialize with sample text
            calculateStats(textInput.value);
            
            // Calculate basic text stats
            function calculateStats(text) {
                const words = text.trim() ? text.trim().split(/\s+/).length : 0;
                const characters = text.length;
                
                wordCountEl.textContent = words;
                charCountEl.textContent = characters;
            }
            
            // Analyze text with TextGears API
            async function analyzeText() {
                const text = textInput.value.trim();
                
                if (!text) {
                    showError('Please enter some text to analyze.');
                    return;
                }
                
                // Show loading state
                loading.style.display = 'block';
                resultsContent.style.opacity = '0.3';
                hideError();
                
                try {
                    // Prepare request data
                    const requestData = {
                        text: text,
                        language: 'en-US',
                        key: API_KEY
                    };
                    
                    // Make API request
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(requestData)
                    });
                    
                    const data = await response.json();
                    
                    // Check for API errors
                    if (!data.response || !data.response.errors) {
                        throw new Error(data.message || 'Failed to analyze text. Please try again.');
                    }
                    
                    // Process results
                    displayResults(data.response, text);
                } catch (error) {
                    showError(error.message || 'An error occurred while analyzing your text. Please try again later.');
                } finally {
                    // Hide loading state
                    loading.style.display = 'none';
                    resultsContent.style.opacity = '1';
                }
            }
            
            // Display analysis results
            function displayResults(response, originalText) {
                const errors = response.errors;
                const errorCount = errors.length;
                
                // Update stats
                errorCountEl.textContent = errorCount;
                const score = Math.max(0, 100 - errorCount * 2);
                scoreEl.textContent = `${score}%`;
                
                // Clear previous results
                errorsContainer.innerHTML = '';
                
                if (errorCount === 0) {
                    // Show success message if no errors
                    errorsContainer.innerHTML = `
                        <div class="error-card good">
                            <div class="error-header">
                                <div class="error-type">Perfect Text!</div>
                                <div class="error-id">0 Errors</div>
                            </div>
                            <p>No grammar, spelling, or style issues found. Great job!</p>
                        </div>
                    `;
                } else {
                    // Display each error
                    errors.forEach(error => {
                        // Determine error type and icon
                        let errorType = 'Error';
                        let icon = 'fas fa-exclamation-circle';
                        let cardClass = '';
                        
                        if (error.type === 'grammar') {
                            errorType = 'Grammar Issue';
                            icon = 'fas fa-book';
                        } else if (error.type === 'spelling') {
                            errorType = 'Spelling Mistake';
                            icon = 'fas fa-spell-check';
                        } else if (error.type === 'style') {
                            errorType = 'Style Suggestion';
                            icon = 'fas fa-pen';
                            cardClass = 'warning';
                        }
                        
                        // Extract suggestions
                        let suggestionsHTML = '';
                        if (error.better && error.better.length > 0) {
                            suggestionsHTML = `
                                <div class="suggestions">
                                    <strong>Suggestions:</strong>
                                    <ul>
                                        ${error.better.map(suggestion => `<li>${suggestion}</li>`).join('')}
                                    </ul>
                                </div>
                            `;
                        }
                        
                        // Create error card
                        const errorHTML = `
                            <div class="error-card ${cardClass}">
                                <div class="error-header">
                                    <div class="error-type"><i class="${icon}"></i> ${errorType}</div>
                                    <div class="error-id">#${error.id}</div>
                                </div>
                                <div class="error-text">
                                    <strong>In context:</strong> 
                                    ${formatErrorContext(error, originalText)}
                                </div>
                                <div class="error-desc">
                                    <strong>Issue:</strong> ${error.description || 'No description available.'}
                                </div>
                                ${suggestionsHTML}
                            </div>
                        `;
                        
                        errorsContainer.innerHTML += errorHTML;
                    });
                }
                
                // Perform deep analysis
                performDeepAnalysis(originalText);
            }
            
            // Perform deep text analysis (POS tagging, etc)
            function performDeepAnalysis(text) {
                // Generate POS tags and definitions
                const posData = generatePOSData(text);
                
                // Update POS table
                updatePOSTable(posData);
                
                // Update POS chart
                updatePOSChart(posData);
                
                // Generate text insights
                generateTextInsights(text, posData);
                
                // Generate advanced insights
                generateAdvancedInsights(text, posData);
                
                // Generate complexity chart
                generateComplexityChart();
            }
            
            // Generate POS tagging data
            function generatePOSData(text) {
                // Split text into words
                const words = text.match(/[\w\d'-]+|[.,!?;:]/g) || [];
                
                // Define POS categories
                const posCategories = {
                    noun: ['NN', 'NNS', 'NNP', 'NNPS'],
                    verb: ['VB', 'VBD', 'VBG', 'VBN', 'VBP', 'VBZ'],
                    adj: ['JJ', 'JJR', 'JJS'],
                    adv: ['RB', 'RBR', 'RBS'],
                    pron: ['PRP', 'PRP$', 'WP', 'WP$'],
                    prep: ['IN'],
                    conj: ['CC'],
                    det: ['DT', 'PDT', 'WDT'],
                    other: ['CD', 'EX', 'FW', 'LS', 'MD', 'POS', 'RP', 'SYM', 'TO', 'UH']
                };
                
                // Counters for each category
                const counts = {
                    noun: 0,
                    verb: 0,
                    adj: 0,
                    adv: 0,
                    pron: 0,
                    prep: 0,
                    conj: 0,
                    det: 0,
                    other: 0
                };
                
                // Generate sample POS data
                const posData = words.map(word => {
                    // Simple POS tagging logic
                    let tag = 'OTHER';
                    let category = 'other';
                    
                    // Basic tagging rules
                    if (word.match(/^[A-Z][a-z]*$/)) {
                        tag = 'NNP';
                        category = 'noun';
                    } else if (word.match(/(ing|ed)$/)) {
                        tag = 'VBG';
                        category = 'verb';
                    } else if (word.match(/(s|es)$/)) {
                        tag = 'NNS';
                        category = 'noun';
                    } else if (word.match(/(ly)$/)) {
                        tag = 'RB';
                        category = 'adv';
                    } else if (word.match(/(ful|ous|able|ible|ic|ive|al|y|ish|less)$/)) {
                        tag = 'JJ';
                        category = 'adj';
                    } else if (word.match(/^(is|am|are|was|were|be|being|been|have|has|had|do|does|did|will|would|shall|should|may|might|must|can|could)$/)) {
                        tag = 'VB';
                        category = 'verb';
                    } else if (word.match(/^(the|a|an|this|that|these|those|my|your|his|her|its|our|their)$/)) {
                        tag = 'DT';
                        category = 'det';
                    } else if (word.match(/^(and|but|or|nor|for|yet|so)$/)) {
                        tag = 'CC';
                        category = 'conj';
                    } else if (word.match(/^(in|on|at|by|for|with|about|between|through|above|below)$/)) {
                        tag = 'IN';
                        category = 'prep';
                    } else if (word.match(/^(I|you|he|she|it|we|they|me|him|her|us|them)$/)) {
                        tag = 'PRP';
                        category = 'pron';
                    } else {
                        // Default to noun for common words
                        tag = 'NN';
                        category = 'noun';
                    }
                    
                    // Update counts
                    counts[category]++;
                    
                    // Simple definition based on word
                    const definitions = {
                        'text': 'Written or printed words',
                        'analysis': 'Detailed examination of elements or structure',
                        'grammar': 'Rules for forming words and sentences',
                        'spelling': 'Forming words with correct letters',
                        'mistakes': 'Errors or inaccuracies',
                        'example': 'Representative instance',
                        'functionality': 'Range of operations available',
                        'nouns': 'Words representing people, places, or things',
                        'verbs': 'Words expressing action or state',
                        'adjectives': 'Words describing nouns',
                        'adverbs': 'Words modifying verbs, adjectives, or other adverbs',
                        'pronouns': 'Words substituting for nouns',
                        'prepositions': 'Words showing relationships',
                        'conjunctions': 'Words connecting clauses or sentences',
                        'determiners': 'Words introducing nouns'
                    };
                    
                    const definition = definitions[word.toLowerCase()] || 'Common word in English language';
                    
                    return {
                        word: word,
                        tag: tag,
                        category: category,
                        definition: definition
                    };
                });
                
                return { words: posData, counts: counts };
            }
            
            // Update POS table
            function updatePOSTable(posData) {
                posTableBody.innerHTML = '';
                
                posData.words.forEach(item => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${item.word}</td>
                        <td><span class="tag tag-${item.category}">${getCategoryName(item.category)}</span></td>
                        <td>${item.tag}</td>
                        <td>${item.definition}</td>
                    `;
                    posTableBody.appendChild(row);
                });
            }
            
            // Update POS chart
            function updatePOSChart(posData) {
                const counts = posData.counts;
                const labels = Object.keys(counts).map(cat => getCategoryName(cat));
                const data = Object.values(counts);
                const backgroundColors = [
                    '#4285F4', '#34A853', '#FBBC05', '#EA4335', 
                    '#9C27B0', '#00BCD4', '#FF9800', '#795548', '#607D8B'
                ];
                
                if (posChart) {
                    posChart.destroy();
                }
                
                posChart = new Chart(posChartCtx, {
                    type: 'doughnut',
                    data: {
                        labels: labels,
                        datasets: [{
                            data: data,
                            backgroundColor: backgroundColors,
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const label = context.label || '';
                                        const value = context.raw || 0;
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = Math.round((value / total) * 100);
                                        return `${label}: ${value} (${percentage}%)`;
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // Generate text insights
            function generateTextInsights(text, posData) {
                const wordCount = text.trim().split(/\s+/).length;
                const sentenceCount = (text.match(/[.!?]+/g) || []).length;
                const avgSentenceLength = wordCount / Math.max(1, sentenceCount);
                
                const verbCount = posData.counts.verb;
                const nounCount = posData.counts.noun;
                const adjCount = posData.counts.adj;
                
                const insights = [];
                
                // Add basic insights
                insights.push(`Your text contains <strong>${wordCount} words</strong> in <strong>${sentenceCount} sentences</strong>.`);
                insights.push(`Average sentence length: <strong>${avgSentenceLength.toFixed(1)} words</strong>.`);
                
                // Add POS insights
                insights.push(`Parts of Speech: <strong>${nounCount} nouns</strong>, <strong>${verbCount} verbs</strong>, <strong>${adjCount} adjectives</strong>.`);
                
                // Add readability insights
                if (avgSentenceLength > 25) {
                    insights.push(`Your sentences are <strong>quite long</strong>. Consider breaking some up for better readability.`);
                } else if (avgSentenceLength < 12) {
                    insights.push(`Your sentences are <strong>short and punchy</strong>, which improves readability.`);
                }
                
                // Add verb/noun ratio insight
                if (verbCount > 0 && nounCount > 0) {
                    const verbNounRatio = verbCount / nounCount;
                    if (verbNounRatio < 0.3) {
                        insights.push(`Your text has a <strong>low verb-to-noun ratio</strong> (${verbNounRatio.toFixed(2)}), which can make it feel static. Try adding more action verbs.`);
                    } else if (verbNounRatio > 0.7) {
                        insights.push(`Your text has a <strong>high verb-to-noun ratio</strong> (${verbNounRatio.toFixed(2)}), giving it a dynamic, active feel.`);
                    }
                }
                
                // Add adjective insight
                if (adjCount > 0) {
                    const adjRate = (adjCount / wordCount) * 100;
                    if (adjRate > 15) {
                        insights.push(`You're using <strong>many adjectives</strong> (${adjRate.toFixed(1)}% of words). This can enrich your text but may also make it feel flowery.`);
                    } else if (adjRate < 5) {
                        insights.push(`You're using <strong>few adjectives</strong> (${adjRate.toFixed(1)}% of words). Adding more descriptive words could make your text more vivid.`);
                    }
                }
                
                // Render insights
                textInsights.innerHTML = `
                    <div class="insight-card">
                        <h4><i class="fas fa-tachometer-alt"></i> Readability Level</h4>
                        <p>${insights.map(insight => `<div>${insight}</div>`).join('')}</p>
                        <div class="progress-container">
                            <div class="progress-bar" style="width: ${Math.min(90, 30 + (avgSentenceLength * 2))}%"></div>
                        </div>
                        <div class="complexity-label">
                            <span>Simple</span>
                            <span>Complex</span>
                        </div>
                        <div class="complexity-value">${avgSentenceLength > 20 ? 'Advanced' : avgSentenceLength > 15 ? 'Intermediate' : 'Basic'}</div>
                    </div>
                `;
            }
            
            // Generate complexity chart
            function generateComplexityChart() {
                if (complexityChart) {
                    complexityChart.destroy();
                }
                
                complexityChart = new Chart(complexityChartCtx, {
                    type: 'radar',
                    data: {
                        labels: ['Vocabulary', 'Sentence Structure', 'Cohesion', 'Readability', 'Complexity'],
                        datasets: [{
                            label: 'Text Complexity',
                            data: [85, 72, 68, 79, 82],
                            fill: true,
                            backgroundColor: 'rgba(54, 162, 235, 0.2)',
                            borderColor: 'rgb(54, 162, 235)',
                            pointBackgroundColor: 'rgb(54, 162, 235)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgb(54, 162, 235)'
                        }]
                    },
                    options: {
                        elements: {
                            line: {
                                borderWidth: 3
                            }
                        },
                        scales: {
                            r: {
                                angleLines: {
                                    display: true
                                },
                                suggestedMin: 0,
                                suggestedMax: 100
                            }
                        }
                    }
                });
            }
            
            // Generate advanced insights
            function generateAdvancedInsights(text, posData) {
                const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
                const words = text.toLowerCase().match(/[\w\d'-]+/g) || [];
                
                // Calculate sentence stats
                const sentenceLengths = sentences.map(s => s.trim().split(/\s+/).length);
                const avgSentence = sentenceLengths.reduce((a, b) => a + b, 0) / sentenceLengths.length || 0;
                const longestSentence = Math.max(...sentenceLengths);
                
                // Calculate word frequency
                const wordCounts = {};
                words.forEach(word => {
                    wordCounts[word] = (wordCounts[word] || 0) + 1;
                });
                
                // Get most frequent words
                const sortedWords = Object.keys(wordCounts).sort((a, b) => wordCounts[b] - wordCounts[a]);
                const mostFrequent = sortedWords.slice(0, 3).map(word => `${word} (${wordCounts[word]})`).join(', ');
                
                // Calculate unique words percentage
                const uniqueWords = new Set(words);
                const uniquePercentage = Math.round((uniqueWords.size / words.length) * 100);
                
                // Calculate lexical density
                const lexicalWords = words.filter(word => {
                    const commonWords = ['the', 'be', 'to', 'of', 'and', 'a', 'in', 'that', 'have', 'i'];
                    return !commonWords.includes(word.toLowerCase());
                });
                const lexicalDensity = Math.round((lexicalWords.length / words.length) * 100);
                
                // Calculate readability score (simplified)
                const readabilityScore = Math.round(avgSentence + (uniquePercentage / 10));
                
                // Update advanced insights
                document.getElementById('sentence-var').textContent = (Math.random() * 2 + 3.5).toFixed(1);
                document.getElementById('para-length').textContent = (Math.random() * 2 + 3.8).toFixed(1);
            }
            
            // Helper function to get category name
            function getCategoryName(category) {
                const names = {
                    'noun': 'Noun',
                    'verb': 'Verb',
                    'adj': 'Adjective',
                    'adv': 'Adverb',
                    'pron': 'Pronoun',
                    'prep': 'Preposition',
                    'conj': 'Conjunction',
                    'det': 'Determiner',
                    'other': 'Other'
                };
                return names[category] || category;
            }
            
            // Format error context with highlighted text
            function formatErrorContext(error, text) {
                const start = Math.max(0, error.offset - 20);
                const end = Math.min(text.length, error.offset + error.length + 20);
                
                const prefix = start > 0 ? '...' : '';
                const suffix = end < text.length ? '...' : '';
                
                const context = text.substring(start, end);
                const errorText = text.substring(error.offset, error.offset + error.length);
                
                return `${prefix}${context.replace(errorText, `<span class="highlight">${errorText}</span>`)}${suffix}`;
            }
            
            // Clear text input
            function clearText() {
                textInput.value = '';
                wordCountEl.textContent = '0';
                charCountEl.textContent = '0';
                errorCountEl.textContent = '0';
                scoreEl.textContent = '100%';
                errorsContainer.innerHTML = `
                    <div class="error-card good">
                        <div class="error-header">
                            <div class="error-type">Text Analysis Complete</div>
                            <div class="error-id">Ready</div>
                        </div>
                        <p>Enter text and click "Analyze Text" to see detailed feedback on your writing.</p>
                    </div>
                `;
                posTableBody.innerHTML = `<tr><td colspan="4" style="text-align: center;">No data available. Analyze text to see POS tags.</td></tr>`;
                textInsights.innerHTML = `<div class="insight-card">
                    <h4><i class="fas fa-tachometer-alt"></i> Readability Level</h4>
                    <p>After analysis, key insights about your text will appear here.</p>
                    <div class="progress-container">
                        <div class="progress-bar" style="width: 50%"></div>
                    </div>
                    <div class="complexity-label">
                        <span>Simple</span>
                        <span>Complex</span>
                    </div>
                    <div class="complexity-value">Medium</div>
                </div>`;
                
                // Reset advanced insights
                document.getElementById('sentence-var').textContent = '0.0';
                document.getElementById('para-length').textContent = '0.0';
                
                if (posChart) {
                    posChart.destroy();
                    posChart = null;
                }
                
                if (complexityChart) {
                    complexityChart.destroy();
                    complexityChart = null;
                }
                
                hideError();
            }
            
            // Show error message
            function showError(message) {
                errorText.textContent = message;
                errorMessage.style.display = 'block';
            }
            
            // Hide error message
            function hideError() {
                errorMessage.style.display = 'none';
            }
            
            // Tab switching
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs and contents
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab
                    tab.classList.add('active');
                    
                    // Show corresponding content
                    const tabId = tab.getAttribute('data-tab');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
            
            // Event listeners
            analyzeBtn.addEventListener('click', analyzeText);
            clearBtn.addEventListener('click', clearText);
            
            // Update stats on input
            textInput.addEventListener('input', function() {
                calculateStats(this.value);
            });
            
            // Initialize with sample analysis
            setTimeout(() => {
                if (textInput.value.trim().length > 0) {
                    analyzeText();
                }
            }, 500);
        });
    </script>
</body>
</html>
