<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Advanced Calendar with Google Integration</title>
  <style>
    :root {
      --primary-color: #2e7d32;
      --primary-light: #60ad5e;
      --primary-dark: #005005;
      --secondary-color: #f5f5f5;
      --accent-color: #ffc107;
      --text-color: #333;
      --light-text: #fff;
      --border-color: #ddd;
      --today-color: #ffeb3b;
      --friday-color: #ff5252;
      --saturday-color: #ff9800;
      --event-color: #4285f4;
      --hover-color: #e8f5e9;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      color: var(--text-color);
      line-height: 1.6;
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    header {
      background: linear-gradient(to right, var(--primary-color), var(--primary-light));
      color: var(--light-text);
      padding: 25px 20px;
      text-align: center;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      font-weight: 600;
    }

    .subtitle {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    .controls {
      padding: 25px 20px;
      background-color: var(--secondary-color);
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      align-items: center;
      justify-content: center;
    }

    .control-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    label {
      font-weight: 600;
      color: var(--primary-dark);
      font-size: 0.9rem;
    }

    select, input, button {
      padding: 10px 15px;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    select:focus, input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px rgba(46, 125, 50, 0.2);
    }

    button {
      background-color: var(--primary-color);
      color: white;
      border: none;
      cursor: pointer;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    button:hover {
      background-color: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    button:active {
      transform: translateY(0);
    }

    .current-date {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--primary-dark);
      text-align: center;
      padding: 10px;
      background-color: rgba(46, 125, 50, 0.1);
      border-radius: 6px;
      margin: 0 10px;
    }

    #calendar {
      padding: 20px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }

    .month-container {
      background-color: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      transition: transform 0.3s ease;
    }

    .month-container:hover {
      transform: translateY(-5px);
    }

    .month-header {
      background: linear-gradient(to right, var(--primary-color), var(--primary-light));
      color: white;
      padding: 12px;
      text-align: center;
      font-weight: 600;
      font-size: 1.2rem;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th {
      background-color: var(--primary-light);
      color: white;
      padding: 10px 5px;
      font-weight: 600;
      font-size: 0.9rem;
    }

    td {
      border: 1px solid var(--border-color);
      padding: 10px 5px;
      text-align: center;
      transition: all 0.2s ease;
      position: relative;
      cursor: pointer;
      height: 60px;
      vertical-align: top;
    }

    td:hover {
      background-color: var(--hover-color);
    }

    /* Highlight today's date */
    td.today {
      background-color: var(--today-color);
      color: black;
      font-weight: bold;
      box-shadow: 0 0 0 2px var(--primary-color);
    }

    /* Friday style */
    td.friday {
      background-color: var(--friday-color);
      color: white;
    }

    /* Saturday style */
    td.saturday {
      background-color: var(--saturday-color);
      color: white;
    }

    /* Today on Friday (Gradient) */
    td.today.friday {
      background: linear-gradient(135deg, var(--friday-color) 0%, var(--today-color) 100%);
      color: black;
      font-weight: bold;
    }

    /* Today on Saturday (Gradient) */
    td.today.saturday {
      background: linear-gradient(135deg, var(--saturday-color) 0%, var(--today-color) 100%);
      color: black;
      font-weight: bold;
    }

    .empty-cell {
      background-color: #f9f9f9;
    }

    .event-indicator {
      position: absolute;
      bottom: 2px;
      left: 50%;
      transform: translateX(-50%);
      width: 6px;
      height: 6px;
      background-color: var(--event-color);
      border-radius: 50%;
    }

    .event-list {
      margin-top: 5px;
      font-size: 0.7rem;
      text-align: left;
      padding: 0 2px;
    }

    .event-item {
      background-color: var(--event-color);
      color: white;
      border-radius: 3px;
      padding: 1px 4px;
      margin-bottom: 2px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .legend {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
      padding: 15px;
      background-color: var(--secondary-color);
      border-radius: 8px;
      flex-wrap: wrap;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .legend-color {
      width: 20px;
      height: 20px;
      border-radius: 4px;
    }

    .today-legend {
      background-color: var(--today-color);
    }

    .friday-legend {
      background-color: var(--friday-color);
    }

    .saturday-legend {
      background-color: var(--saturday-color);
    }

    .today-friday-legend {
      background: linear-gradient(135deg, var(--friday-color) 0%, var(--today-color) 100%);
    }

    .today-saturday-legend {
      background: linear-gradient(135deg, var(--saturday-color) 0%, var(--today-color) 100%);
    }

    .event-legend {
      background-color: var(--event-color);
    }

    .year-generator {
      display: flex;
      flex-direction: column;
      gap: 10px;
      padding: 15px;
      background-color: var(--secondary-color);
      border-radius: 8px;
      margin-top: 20px;
    }

    .year-input-group {
      display: flex;
      gap: 10px;
      align-items: center;
      justify-content: center;
    }

    .year-input-group input {
      width: 120px;
      text-align: center;
    }

    .api-status {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 15px;
      background-color: #e8f5e9;
      border-radius: 6px;
      margin-top: 10px;
    }

    .status-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background-color: #4caf50;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.5; }
      100% { opacity: 1; }
    }

    footer {
      text-align: center;
      padding: 20px;
      color: var(--text-color);
      font-size: 0.9rem;
      border-top: 1px solid var(--border-color);
      margin-top: 20px;
    }

    @media (max-width: 768px) {
      .controls {
        flex-direction: column;
        align-items: stretch;
      }
      
      .control-group {
        width: 100%;
      }
      
      #calendar {
        grid-template-columns: 1fr;
      }
      
      .year-input-group {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Advanced Calendar</h1>
      <div class="subtitle">With Google Calendar Integration</div>
    </header>
    
    <div class="controls">
      <div class="control-group">
        <label for="yearSelect">Select Year</label>
        <select id="yearSelect" onchange="updateCalendar()"></select>
      </div>
      
      <div class="control-group">
        <label for="monthSelect">Jump to Month</label>
        <select id="monthSelect" onchange="jumpToMonth()">
          <option value="0">January</option>
          <option value="1">February</option>
          <option value="2">March</option>
          <option value="3">April</option>
          <option value="4">May</option>
          <option value="5">June</option>
          <option value="6">July</option>
          <option value="7">August</option>
          <option value="8">September</option>
          <option value="9">October</option>
          <option value="10">November</option>
          <option value="11">December</option>
        </select>
      </div>
      
      <div class="control-group">
        <label for="dateInput">Jump to Specific Date</label>
        <input type="date" id="dateInput" onchange="jumpToDate()">
      </div>
      
      <button onclick="jumpToToday()">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
          <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
          <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
        </svg>
        Today
      </button>
      
      <div class="current-date" id="currentDateDisplay"></div>
    </div>
    
    <div class="year-generator">
      <h3>Generate Calendar for Additional Years</h3>
      <div class="year-input-group">
        <input type="number" id="newYearInput" placeholder="Enter year" min="1000" max="9999">
        <button onclick="addYearToSelector()">Add Year to Calendar</button>
      </div>
      <p style="font-size: 0.9rem; text-align: center;">Default range: 1800-2100. Add any year between 1000-9999.</p>
      
      <div class="api-status">
        <div class="status-indicator"></div>
        <span>Google Calendar API: Active (Updates every 8 hours)</span>
      </div>
    </div>
    
    <div id="calendar"></div>
    
    <div class="legend">
      <div class="legend-item">
        <div class="legend-color today-legend"></div>
        <span>Today</span>
      </div>
      <div class="legend-item">
        <div class="legend-color friday-legend"></div>
        <span>Friday (Holiday)</span>
      </div>
      <div class="legend-item">
        <div class="legend-color saturday-legend"></div>
        <span>Saturday (Holiday)</span>
      </div>
      <div class="legend-item">
        <div class="legend-color today-friday-legend"></div>
        <span>Today (Friday)</span>
      </div>
      <div class="legend-item">
        <div class="legend-color today-saturday-legend"></div>
        <span>Today (Saturday)</span>
      </div>
      <div class="legend-item">
        <div class="legend-color event-legend"></div>
        <span>Google Calendar Event</span>
      </div>
    </div>
    
    <footer>
      <p>Advanced Calendar &copy; 2023 | Friday and Saturday are highlighted as holidays | Google Calendar Integration Active</p>
    </footer>
  </div>

  <script>
    const today = new Date();
    let currentYear = today.getFullYear();
    let currentMonth = today.getMonth();
    let googleEvents = {};
    let updateInterval;

    // Initialize year options with default range 1800-2100
    const yearSelect = document.getElementById("yearSelect");
    function initializeYearSelector() {
      // Clear existing options
      yearSelect.innerHTML = '';
      
      // Add default years (1800-2100)
      for (let year = 1800; year <= 2100; year++) {
        const option = document.createElement("option");
        option.value = year;
        option.textContent = year;
        if (year === today.getFullYear()) option.selected = true;
        yearSelect.appendChild(option);
      }
    }
    
    initializeYearSelector();

    // Set current month in month selector
    document.getElementById("monthSelect").value = today.getMonth();

    // Update current date display
    function updateCurrentDateDisplay() {
      const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
      document.getElementById("currentDateDisplay").textContent = 
        `Current Date: ${today.toLocaleDateString('en-US', options)}`;
    }

    // Function to fetch events from Google Calendar API
    async function fetchGoogleCalendarEvents(year) {
      const API_KEY = 'AIzaSyA5ewt8gNixBDRh0MNZhNvQtaY0Rx6yjC4';
      // Using a public holidays calendar
      const CALENDAR_ID = 'en.usa#holiday@group.v.calendar.google.com';
      
      // Calculate time range for the year
      const timeMin = new Date(year, 0, 1).toISOString();
      const timeMax = new Date(year, 11, 31).toISOString();
      
      try {
        const response = await fetch(
          `https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(CALENDAR_ID)}/events?` +
          `key=${API_KEY}&timeMin=${timeMin}&timeMax=${timeMax}&singleEvents=true&orderBy=startTime`
        );
        
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const data = await response.json();
        return data.items || [];
      } catch (error) {
        console.error('Error fetching Google Calendar events:', error);
        // Return mock data for demonstration
        return generateMockEvents(year);
      }
    }

    // Generate mock events for demonstration
    function generateMockEvents(year) {
      const events = [];
      const holidays = [
        { name: "New Year's Day", month: 0, day: 1 },
        { name: "Valentine's Day", month: 1, day: 14 },
        { name: "St. Patrick's Day", month: 2, day: 17 },
        { name: "April Fools' Day", month: 3, day: 1 },
        { name: "Earth Day", month: 3, day: 22 },
        { name: "Cinco de Mayo", month: 4, day: 5 },
        { name: "Mother's Day", month: 4, day: 14 }, // Second Sunday in May
        { name: "Memorial Day", month: 4, day: 29 }, // Last Monday in May
        { name: "Father's Day", month: 5, day: 18 }, // Third Sunday in June
        { name: "Independence Day", month: 6, day: 4 },
        { name: "Labor Day", month: 8, day: 4 }, // First Monday in September
        { name: "Halloween", month: 9, day: 31 },
        { name: "Veterans Day", month: 10, day: 11 },
        { name: "Thanksgiving", month: 10, day: 23 }, // Fourth Thursday in November
        { name: "Christmas Eve", month: 11, day: 24 },
        { name: "Christmas Day", month: 11, day: 25 },
        { name: "New Year's Eve", month: 11, day: 31 }
      ];

      holidays.forEach(holiday => {
        const date = new Date(year, holiday.month, holiday.day);
        // Adjust for floating holidays
        if (holiday.name === "Mother's Day") {
          // Second Sunday in May
          date.setDate(1); // Start from first day of month
          while (date.getDay() !== 0 || date.getDate() <= 7) {
            date.setDate(date.getDate() + 1);
          }
          date.setDate(date.getDate() + 7); // Second Sunday
        } else if (holiday.name === "Memorial Day") {
          // Last Monday in May
          date.setDate(1);
          date.setMonth(5); // June
          date.setDate(0); // Last day of May
          while (date.getDay() !== 1) {
            date.setDate(date.getDate() - 1);
          }
        } else if (holiday.name === "Father's Day") {
          // Third Sunday in June
          date.setDate(1);
          while (date.getDay() !== 0 || date.getDate() <= 14) {
            date.setDate(date.getDate() + 1);
          }
          date.setDate(date.getDate() + 7); // Third Sunday
        } else if (holiday.name === "Labor Day") {
          // First Monday in September
          date.setDate(1);
          while (date.getDay() !== 1) {
            date.setDate(date.getDate() + 1);
          }
        } else if (holiday.name === "Thanksgiving") {
          // Fourth Thursday in November
          date.setDate(1);
          while (date.getDay() !== 4 || date.getDate() <= 21) {
            date.setDate(date.getDate() + 1);
          }
          date.setDate(date.getDate() + 21); // Fourth Thursday
        }

        events.push({
          summary: holiday.name,
          start: {
            date: date.toISOString().split('T')[0]
          }
        });
      });

      // Add some random events
      for (let i = 0; i < 10; i++) {
        const month = Math.floor(Math.random() * 12);
        const day = Math.floor(Math.random() * 28) + 1;
        const eventTypes = ["Team Meeting", "Project Deadline", "Conference", "Birthday", "Appointment"];
        const randomEvent = eventTypes[Math.floor(Math.random() * eventTypes.length)];
        
        events.push({
          summary: randomEvent,
          start: {
            date: new Date(year, month, day).toISOString().split('T')[0]
          }
        });
      }

      return events;
    }

    // Process events and store by date
    function processEvents(events) {
      const eventsByDate = {};
      
      events.forEach(event => {
        const dateStr = event.start.date || event.start.dateTime.split('T')[0];
        if (!eventsByDate[dateStr]) {
          eventsByDate[dateStr] = [];
        }
        eventsByDate[dateStr].push(event.summary);
      });
      
      return eventsByDate;
    }

    // Generate calendar
    async function generateCalendar(year) {
      const calendarDiv = document.getElementById("calendar");
      calendarDiv.innerHTML = ""; // Clear previous calendar

      // Fetch events from Google Calendar
      const events = await fetchGoogleCalendarEvents(year);
      googleEvents = processEvents(events);

      const months = [
        "January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"
      ];

      months.forEach((month, index) => {
        const monthContainer = document.createElement("div");
        monthContainer.className = "month-container";
        monthContainer.id = `month-${index}`;

        const monthHeader = document.createElement("div");
        monthHeader.className = "month-header";
        monthHeader.textContent = `${month} ${year}`;
        monthContainer.appendChild(monthHeader);

        const table = document.createElement("table");
        const thead = document.createElement("thead");
        thead.innerHTML = `
          <tr>
            <th>Sun</th>
            <th>Mon</th>
            <th>Tue</th>
            <th>Wed</th>
            <th>Thu</th>
            <th>Fri</th>
            <th>Sat</th>
          </tr>
        `;
        table.appendChild(thead);

        const tbody = document.createElement("tbody");
        const firstDay = new Date(year, index, 1).getDay();
        const daysInMonth = new Date(year, index + 1, 0).getDate();

        let row = document.createElement("tr");
        
        // Add empty cells for days before the first day of the month
        for (let i = 0; i < firstDay; i++) {
          const emptyCell = document.createElement("td");
          emptyCell.className = "empty-cell";
          row.appendChild(emptyCell);
        }

        for (let day = 1; day <= daysInMonth; day++) {
          const cell = document.createElement("td");
          cell.textContent = day;
          const dateStr = `${year}-${String(index + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
          cell.setAttribute("data-date", dateStr);

          // Check if it's today
          const isToday = 
            year === today.getFullYear() &&
            index === today.getMonth() &&
            day === today.getDate();

          // Check if it's Friday (5) or Saturday (6)
          const dayOfWeek = new Date(year, index, day).getDay();
          const isFriday = dayOfWeek === 5;
          const isSaturday = dayOfWeek === 6;

          // Apply appropriate classes
          if (isToday) {
            cell.classList.add("today");
          }
          if (isFriday) {
            cell.classList.add("friday");
          }
          if (isSaturday) {
            cell.classList.add("saturday");
          }

          // Add Google Calendar events if any
          if (googleEvents[dateStr]) {
            const eventList = document.createElement("div");
            eventList.className = "event-list";
            
            // Show up to 2 events, with indicator for more
            const eventsToShow = googleEvents[dateStr].slice(0, 2);
            eventsToShow.forEach(eventName => {
              const eventItem = document.createElement("div");
              eventItem.className = "event-item";
              eventItem.textContent = eventName;
              eventList.appendChild(eventItem);
            });
            
            // Add indicator if there are more events
            if (googleEvents[dateStr].length > 2) {
              const moreIndicator = document.createElement("div");
              moreIndicator.className = "event-item";
              moreIndicator.textContent = `+${googleEvents[dateStr].length - 2} more`;
              eventList.appendChild(moreIndicator);
            }
            
            cell.appendChild(eventList);
            
            // Add event indicator dot
            const eventIndicator = document.createElement("div");
            eventIndicator.className = "event-indicator";
            cell.appendChild(eventIndicator);
          }

          // Add click event to select date
          cell.addEventListener("click", function() {
            selectDate(this.getAttribute("data-date"));
          });

          row.appendChild(cell);

          // Start a new row after Saturday
          if ((firstDay + day) % 7 === 0) {
            tbody.appendChild(row);
            row = document.createElement("tr");
          }
        }

        // Add empty cells for remaining days in the last week
        if (row.children.length > 0) {
          const remainingCells = 7 - row.children.length;
          for (let i = 0; i < remainingCells; i++) {
            const emptyCell = document.createElement("td");
            emptyCell.className = "empty-cell";
            row.appendChild(emptyCell);
          }
          tbody.appendChild(row);
        }

        table.appendChild(tbody);
        monthContainer.appendChild(table);
        calendarDiv.appendChild(monthContainer);
      });

      updateCurrentDateDisplay();
    }

    function updateCalendar() {
      currentYear = parseInt(yearSelect.value);
      generateCalendar(currentYear);
    }

    function jumpToMonth() {
      const selectedMonth = parseInt(document.getElementById("monthSelect").value);
      const element = document.getElementById(`month-${selectedMonth}`);
      if (element) {
        element.scrollIntoView({ behavior: 'smooth', block: 'start' });
        // Highlight the month header briefly
        element.style.boxShadow = "0 0 0 3px var(--primary-color)";
        setTimeout(() => {
          element.style.boxShadow = "";
        }, 2000);
      }
    }

    function jumpToDate() {
      const dateInput = document.getElementById("dateInput").value;
      if (dateInput) {
        const dateParts = dateInput.split("-");
        const year = parseInt(dateParts[0]);
        const month = parseInt(dateParts[1]) - 1; // Months are 0-indexed in JS
        const day = parseInt(dateParts[2]);
        
        // Update year and month selectors
        yearSelect.value = year;
        document.getElementById("monthSelect").value = month;
        
        // Generate calendar for that year
        generateCalendar(year);
        
        // Scroll to the specific month and highlight the date
        setTimeout(() => {
          const element = document.getElementById(`month-${month}`);
          if (element) {
            element.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            // Highlight the specific date
            const dateCell = element.querySelector(`[data-date="${year}-${month+1}-${day}"]`);
            if (dateCell) {
              dateCell.style.backgroundColor = "var(--primary-light)";
              dateCell.style.color = "white";
              dateCell.style.fontWeight = "bold";
              
              // Reset after 3 seconds
              setTimeout(() => {
                dateCell.style.backgroundColor = "";
                dateCell.style.color = "";
                dateCell.style.fontWeight = "";
              }, 3000);
            }
          }
        }, 100);
      }
    }

    function jumpToToday() {
      yearSelect.value = today.getFullYear();
      document.getElementById("monthSelect").value = today.getMonth();
      document.getElementById("dateInput").value = today.toISOString().split('T')[0];
      generateCalendar(today.getFullYear());
      
      // Scroll to current month
      setTimeout(() => {
        const element = document.getElementById(`month-${today.getMonth()}`);
        if (element) {
          element.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      }, 100);
    }

    function selectDate(dateString) {
      const dateParts = dateString.split("-");
      const year = parseInt(dateParts[0]);
      const month = parseInt(dateParts[1]) - 1;
      const day = parseInt(dateParts[2]);
      
      const selectedDate = new Date(year, month, day);
      const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
      
      let eventInfo = "";
      if (googleEvents[dateString]) {
        eventInfo = `\n\nEvents on this day:\n${googleEvents[dateString].join('\n')}`;
      }
      
      alert(`You selected: ${selectedDate.toLocaleDateString('en-US', options)}${eventInfo}`);
    }

    function addYearToSelector() {
      const newYearInput = document.getElementById("newYearInput");
      const newYear = parseInt(newYearInput.value);
      
      // Validate the year
      if (isNaN(newYear) || newYear < 1000 || newYear > 9999) {
        alert("Please enter a valid year between 1000 and 9999");
        return;
      }
      
      // Check if the year already exists in the selector
      const existingYears = Array.from(yearSelect.options).map(option => parseInt(option.value));
      if (existingYears.includes(newYear)) {
        alert(`Year ${newYear} is already available in the calendar`);
        return;
      }
      
      // Add the new year to the selector
      const option = document.createElement("option");
      option.value = newYear;
      option.textContent = newYear;
      yearSelect.appendChild(option);
      
      // Select the new year and generate the calendar
      yearSelect.value = newYear;
      generateCalendar(newYear);
      
      // Clear the input field
      newYearInput.value = "";
      
      // Show success message
      alert(`Calendar for year ${newYear} has been added successfully!`);
    }

    // Set up automatic updates every 8 hours (3 times a day)
    function setupAutoUpdates() {
      // Clear any existing interval
      if (updateInterval) {
        clearInterval(updateInterval);
      }
      
      // Update every 8 hours (28,800,000 milliseconds)
      updateInterval = setInterval(() => {
        console.log("Auto-updating calendar data...");
        generateCalendar(currentYear);
      }, 28800000); // 8 hours in milliseconds
    }

    // Generate the initial calendar
    generateCalendar(today.getFullYear());
    
    // Set up auto updates
    setupAutoUpdates();
    
    // Set today's date in the date input
    document.getElementById("dateInput").value = today.toISOString().split('T')[0];
  </script>
</body>
</html>
